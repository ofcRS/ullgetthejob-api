# UllGetTheJob API - Environment Configuration
# Copy this file to .env and fill in your values

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Port the API server will listen on
PORT=3000

# Environment: development | staging | production
NODE_ENV=development

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL connection string (shared with Phoenix Core)
# Format: postgresql://username:password@host:port/database
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/ullget_dev"

# ============================================================================
# AI SERVICES
# ============================================================================

# OpenRouter API Key for AI model access
# Get your key from: https://openrouter.ai/keys
# Required for: CV parsing, job skill extraction, CV customization, cover letter generation
OPENROUTER_API_KEY="sk-or-v1-your-api-key-here"

# Optional: OpenAI API Key for embeddings (if implementing embedding-based matching)
# Get your key from: https://platform.openai.com/api-keys
# OPENAI_API_KEY="sk-your-openai-key-here"

# ============================================================================
# PHOENIX CORE INTEGRATION
# ============================================================================

# URL of the Phoenix Core backend service
# Core handles: HH.ru operations, authentication, OAuth tokens
CORE_URL="http://localhost:4000"

# Shared secret for service-to-service authentication
# Must match the secret configured in Phoenix Core
ORCHESTRATOR_SECRET="your-secure-orchestrator-secret-here"

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================

# JWT secret for token signing (if using JWT)
# Generate with: openssl rand -base64 32
JWT_SECRET="your-jwt-secret-here-min-32-chars"

# JWT token expiration time
# Examples: 1h, 7d, 30d
JWT_EXPIRES_IN="7d"

# Session secret for cookie signing
# Generate with: openssl rand -base64 32
SESSION_SECRET="your-session-secret-here-min-32-chars"

# ============================================================================
# CORS & ALLOWED ORIGINS
# ============================================================================

# Comma-separated list of allowed origins for CORS
# Use '*' to allow all origins (NOT recommended for production)
# Examples: http://localhost:5173,https://app.ullgetthejob.com
ALLOWED_ORIGINS="http://localhost:5173,http://localhost:3000"

# ============================================================================
# FILE UPLOAD CONFIGURATION
# ============================================================================

# Maximum file size for CV uploads (in bytes)
# Default: 10485760 (10MB)
MAX_FILE_SIZE=10485760

# Directory for storing uploaded files
# Relative or absolute path
UPLOAD_DIR="./uploads"

# ============================================================================
# OPTIONAL SERVICES
# ============================================================================

# Redis URL for caching (optional, uses in-memory cache by default)
# Format: redis://username:password@host:port/db
# REDIS_URL="redis://localhost:6379/0"

# Sentry DSN for error tracking (optional)
# Get from: https://sentry.io
# SENTRY_DSN="https://your-sentry-dsn@sentry.io/project-id"

# ============================================================================
# USER PREFERENCES
# ============================================================================

# Your Telegram handle (for contact info in cover letters)
# Example: @your_telegram
TELEGRAM_HANDLE=""

# ============================================================================
# DEVELOPMENT & DEBUGGING
# ============================================================================

# Enable debug logging
# DEBUG="true"

# Log level: error | warn | info | debug | trace
# LOG_LEVEL="info"

# Enable SQL query logging (Drizzle ORM)
# DB_LOGGING="true"

# ============================================================================
# PRODUCTION RECOMMENDATIONS
# ============================================================================

# For production deployment, ensure:
# 1. NODE_ENV=production
# 2. Use strong, unique secrets (min 32 characters)
# 3. Set specific ALLOWED_ORIGINS (no wildcard)
# 4. Use HTTPS for CORE_URL
# 5. Enable REDIS_URL for shared caching
# 6. Configure SENTRY_DSN for error monitoring
# 7. Set appropriate MAX_FILE_SIZE limits
# 8. Use environment-specific DATABASE_URL
# 9. Never commit .env file to version control
# 10. Rotate secrets regularly

# ============================================================================
# QUICK START
# ============================================================================

# 1. Copy this file: cp .env.example .env
# 2. Fill in required values (marked as "your-*-here")
# 3. Get OpenRouter API key: https://openrouter.ai/keys
# 4. Start PostgreSQL: docker-compose up -d postgres (if using Docker)
# 5. Run migrations: bun run db:migrate
# 6. Start server: bun run dev
# 7. Test health endpoint: curl http://localhost:3000/api/health

# For questions, see: README.md
